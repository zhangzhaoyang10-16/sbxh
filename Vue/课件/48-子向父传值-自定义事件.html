<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>子向父传值 自定义事件</title>
  </head>
  <body></body>
  <script>
    // 之前我们学习的父向子传值，用的是自定义属性，自定义属性是在子组件来声明，父组件只负责绑定自定义属性并传值

    // 1. 子向父传值 自定义事件
    // 导入，注册，使用都进行完之后，我们是不是要进行子组件向父组件传值了，那我们是不是应该在子组件里面定义一个数据，然后把这个数据传给父组件

    // 绑定事件给事件添加方法，到目前为止我们和向父组件传值没有任何关系，我们只是在 子组件中进行了数值 +1 的操作，有一个count值默认等于0把它渲染到了 h2标签里面，当点击+1的时候触发 add方法，里面count 自增

    // 接下来就是要把子组件中的数据传给父组件，我要给父组件传值，那是不是父组件要接收一下，那它接收到之后是不是应该存放到自己的 data 里面去,先在 App.vue 定义一个数据项，代表接收子组件的值，传过来的值通过数据项接收之后，我们是不是可以渲染到页面上

    // 现在我们点击子组件的按钮 ，子组件的count 值是不是一直在自增，但是父组件的是为0，因为目前我们是不是还没给父组件传递数据，现在前期准备工作已经完成，重点就是传值了

    // 概念：子组件向父组件共享数据使用自定义事件
    // 示例：
    // 子组件：
    // export default{
    //     data(){
    //         return { count : 0}
    //     },
    //     methods: {
    //         add(){
    //             this.count += 1

    //             // 修改数据时，通过 $emit() 触发自定义事件
    //             this.$emit('numchange',this.count)
    //              第一个参数numhange我们自定义了一个事件，第二个参数是子组件数据，传给父组件的新值
    //                 通过 自定义事件将子组件的数据传给父组件
    //         }
    //     },
    // }
    // 父组件：
    // <Son @numchange="getNewCount"></Son>

    // @代表是绑定事件，那这里是不是相当于我们绑定了我们自定义事件，后面是不是我们的事件处理函数
    // 那我们是不是只要监听了这个  numchange事件，我们就可以调用这个函数只要这个函数被调用了，那this.count这个新值就可以通过 val 形参拿到了，拿到之后是不是就存放到了 data 里面的 countFromSon上了，那么大家想 val哪来的

    // 是不是 this.count传递的是啥， val 接收的就是啥，this.count是实参，val 是形参

    // export default{
    //     data() {
    //         return {
    //             countFromSon:0
    //         }
    //     },
    //     methods: {
    //         getNewCount(val){
    //             this.countFromSon = val
    //         }
    //     },
    // }

    // 那现在就是说有一个自定义事件，事件里面放的是处理函数，那什么时候会调用这个函数，是不是点击的时候会触发，也就是$emit代表触发事件的意思，只要这个被触发，那必然会触发自定义事件，之后进行处理函数，

    // 那现在是不是我们点击子组件的按钮可以自增，没有给父组件传数据，那是不是只要子组件的值一变化就穿一次值

    // 添加了我们$emit之后，我们点击按钮每一点击一次是不是都会触发自定义事件
  </script>
</html>
