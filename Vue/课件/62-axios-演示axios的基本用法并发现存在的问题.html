<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>演示 axios 的基本用法并发现存在的问题</title>
</head>
<body>
  
</body>
<script>
  // 我们在讲一下 axios ，因为咱们在这种 .vue 组件的项目里面发请求的话，我们每一个 .vue 组件都会有这种需求啊
  // 那现在我们发请求要先安装那个包   npm i axios -S

  // 现在我们组件准备好了，实现功能，我希望点击按钮来发起请求
  // 发起get 请求之后是没有问题，可以发起成功的
  // 那假设我需要在 Right 组件中发起 POST 请求  

  // 现在我们给两个组件都发起了 axios 请求，然后先导入在通过 get 或者 post 发起请求

  // 接下来我们要考虑怎么能更加方便友好的使用 axios 


  // 1. 把 axios 挂载到 vue的原型上并配置请求根路径

    // 正常使用之后。我们换一种方式使用 axios
    // 之前是每个组件都要导入 axios ,那我们之前讲过，每一个组件 .vue 组件都相当于是一个 vue  的实例，我们可以认为，可以理解为,每一个 .vue组件都是 new 构造函数得到的 ，既然是这样的，那我是不是可以 再 main.js 里面导入一下

    // 然后再下面 是不是可以访问到 vue 的构造函数  vue.prototype,再挂载一个 axios
    // 那之前大家想一下，没写这行代码之前，再 vue 的构造函数上有 axios 这个自定义属性吗，但是现在有没有，是不是有了，那有了以后再每一个组件中还需要再导入 axios ,不需要了吧

    // 那再组件中怎么写 axios 请求数据 是不是this 实例,通过原型能不能访问到它的 原型上的 axios ,是不是可以,那以后还需要再每个组件导入 axios 吗,是不是不用了

    // 现在不需要再导入了,而是再原型上挂载了一个自定义属性 axios,一般咱们都不叫 axios 应该叫 $http,为啥呢,因为感觉很牛,我们之前也讲过,vue 内置的成员都是 以 $ 开头的,所以咱们模仿成 $http,显得高大上,其实叫什么名字重要吗,是不是都一样

    // 以后我们再组件中发请求怎么发?
    // 今后,再每个 .vue 组件中要发起请求,直接调用 this.$http.get/post 

    // 这里给大家介绍了一下我们如何往咱们原型上去挂载一个共享的成员,那么挂载好以后优势就是每一个 .vue 组件中都可以访问到咱们这个 axios 了,但是我们这样并没有解决请求根路径的问题

      // 1. 假设 Left 组件和 Right 组件 是不是都有 http://www.liulongbin.top:3006/api/ 这么一个路径,那将来万一咱们这个后端路径给改了,不叫 3006了,改成3007了,那咱们是不是需要打开项目的每一个组件把发请求的位置 3006 改成 3007,那你万一漏了一个是不是很麻烦,这个工作量是非常大的,不利于后期的维护

      // 2. 那怎么搞,我们再原型上挂载了一个 axios 对吧,我们可以再原型上挂载之前,咱们通过 axios 做一下全局的配置
        // axios.defaults.baseURL = '请求根路径'
        // 这个是不是要比 jQuery 里面的 ajax 方便很多啊,再 axios 里面是不是只要一行代码一个属性就可以了

        // 那配置完之后，我们还需要再每个组件中写完整的地址吗 是不是直接写 /api/xxx 就可以了



  // 2. 了解直接把axios 挂载到 Vue 原型上的缺点
    // 给大家讲了 全局配置 axios 和根路径对吧，那这样的好处是什么，好处是再 vue 组件中要想发请求直接 this.$http 就可以发起请求啊

    // 那这个也有缺点：它无法实现 api接口的复用          --> 演示问题

      // 1. 再 Right 组件我们是不是点按钮会发起 post 请求
      // 2. 我们再按钮下面再写一个 button 
      // 3. 如果我再 App 组件里面也要拿到这个图书列表呢，h直接赋值过去
      // 4. 那现在是什么样的，是不是一直再复用组件的方法，都再重新调用  那发现问题了吗

      // 把 axios 挂载到 vue 原型上，有一个缺点，不利于 API  接口的复用，但是它再挂载 请求地址，根路径还是很方便的

      // 那这个方法学了，我们还有一种更全的方法

    
</script>
</html>