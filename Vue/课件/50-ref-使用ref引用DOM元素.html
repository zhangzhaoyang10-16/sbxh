<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ref-使用ref引用DOM元素</title>
  </head>
  <body>
    <div class="box">这是box</div>
  </body>
  <script>
    // 在学习vue 之前，我们经常也会使用jquery，用jquery的目的是为了操作 DOM，比如之前我们要拿到一个DOM元素对象，我们会使用getElementById之类的API，这就是操作DOM的API，那学习了jquery之后我们发现元素操作DOM相对来说很复杂，所以我们学习了jquery库，通过jquery的选择器，比如 $('选择器')可以非常方便的就能获取到DOM元素的引用

    // jquery 牛逼的地方就是简化了程序员操作 DOM 的过程
    // vue 优势就是 MVVM，M 里面的数据发生了变化，VM 是不是会监听到，自动把变化后的数据给我们渲染到 V 视图里面，反过来当视图 v里面用户填写了表单，也会被 VM 监听到，通过 v-model双向数据绑定的指令自动把数据同步到 model数据源，有一个数据双向同步的过程

    // 那我们基于 MVVM 的思想，使用 Vue,大家是不是没有操作 DOM，也就是说：在vue中，程序员不需要操作 DOM  ，极少操作 DOM，我们几乎没有操作 DOM的需求，因为vue的 VM 已经帮咱们操作 DOM 了，我们只管把数据维护好就可以了，（数据驱动视图）

    // 结论： 在 vue 项目，强烈不建议大家安装和使用 jquery

    // 假设，在vue项目中，我们刚说过极少操作 DOM ，极少不代表没有，需要操作 DOM 了，需要拿到页面上某个 DOM元素的引用，此时怎么办？能安装 jquery吗，可以，但是不建议

    // 在这里vue 给我们提供了一种方案，可以在不调用 DOM API 的提前下拿到页面上的 DOM 引用，就是vue 给我们提供了 ref 这么一个方案，通过 ref 可以让我们在不调用 DOM API的前提下拿到咱们页面上的某个DOM 的引用

    // 1.ref引用
    // 1.1 什么是 ref 引用
    // ref 用来辅助开发者在不依赖于jquery的情况下，获取 DOM元素或者组件的引用
    // 每一个 vue 的组件实例上，都包含一个 $refs 对象，里面存储着对应的 DOM元素或者组件的引用，默认情况下，组件的 $refs 指向一个空对象

    // 使用分析：
    // 当前我们看到的是 App根组件给我们渲染的一个页面，在上边放了一个button 按钮，输出this,返回 VueComponent 组件实例，在控制打开这个组件实例我们查找有没有 $refs,找到之后大家可以看到默认指向的是空对象，大家找一下规律，前边的一些是不是都是以 $ 开头的，记住了，凡是以 $开头的都是 vue 内置的一些成员，它们怎么来的，是不是vue 挂载上去的

    // 需求：现在我们希望拿到 h1 的DOM 元素引用，让它的文本变为红色
    // 分析：
    // 1.假设我们已经拿到了这个 dom元素了，那接下来是不是应该调用这个 dom的style属性，  dom.style.color = "red",我们现在是希望点击按钮，让 h1 文本从黑色变成红色
    // 2. 首先在点击这个按钮的时候是不是要拿到这个 元素的引用
    // 3. 在 h2 元素的开始标签身上加一个属性叫 ref ,属性值起名为myh2，这个名可以是任意的,这样我们在输出 this,看 $refs是否还指向 一个空对象

    // 4. 现在 $refs 里面显示的是不是 h2 DOM元素，证明myh2这个属性指向的值是一个 DOM元素的引用吧，那为啥叫myh2,是不是因为这个h2元素的ref这个属性的值就是myh2，如果我把这个myh2改为其他的值，$refs中会不会改变，是不是会改变，那这样我们是不是就可以拿到咱们的 DOM引用了，所以在 我们的方法里面要想直接拿到 DOM元素的引用，第一步给那个元素加一个 ref属性起名，第二步就是通过this来拿到这个 DOM 元素引用，输出  console.log(this.$refs.ref属性的值);

    // 5. 我们的DOM元素拿到了，是不是就可以操作DOM添加文本字体颜色了
    // 注意：我们起的名字不可重复使用，不能发生冲突，冲突以后会把之前的覆盖掉

    // 1.2 使用 ref 引用组件实例
    // 我们学习了 ref 获取DOM的引用，那 ref 它除了有这个基础的用法之外，它还可以引用我们的组件
    // 使用 ref 引用页面上的组件实例 ，操作方式：
 
    // 使用 ref属性，为对应的"组件"添加引用名称
    // <myCounter ref="counterRef"></myCounter>
    // <button @click="getRef">获取 $refs 引用</button>

    // methods:{
    //     getRef(){
    //         // 通过 this.$refs. 引用的名称 可以引用组件的实例
    //         console.log(this.$refs.counterRef)

    //         // 引用到组件的实例之后，就可以调用组件上的 methods 方法
    //         this.$refs.counterRef.add()
    //     }
    // }

    // 步骤分析：
    // 1.之前我们给h2标签添加了 ref属性，那h2是标签但是不是一个组件对吧，那接下我们来给组件添加 ref
    // 2. 现在我们是不是应该在 App组件展示一个组件
    // 3. 现在我们在 Left组件中实现一个 点击按钮 数值+1的操作
    // 4. 实现了点击按钮数值加一的需求之后，我希望在点击按钮旁边有一个重置的按钮，让 count 值重置为0
    // 5. 现在我有另外一个需求：我们在子组件中的点击+1和重置功能都实现了，那么我希望在父组件中也有一个重置按钮，点击这个重置按钮将 count 的值重置
    // 6. 那我们想要重置子组件的 count 值是不是需要获取到这个数据或者通过方法去调用，因为这个数据不再我们自身
    // 7. 那现在是不是这样的，我想要点击父组件的重置按钮来重置子组件的 count 值对吧，如果我能调用到子组件里面的 resetCount()这个方法是不是就可以把 Left组件里面的 count 值重置，或者我们在点击 App组件中的重置按钮之后可以操作到 Left组件中的 count 值然后等于 0，是不是也可以，两种方案，但是这两种方案思路是不是相同，都是需要拿到我们 Left组件中方法或者数据去调用

    // 8. 那大家来想一下，子组件 Left 它是不是一个vue 实例，那它作为一个vue 组件实例是不是可以用 this来表示，通过它自己的 this我们是不是可以调用到它自己的方法 resetCount，那现在问题来了，那我们怎么样才能点击父组件的 重置按钮来拿到 子组件的实例，只要拿到子组件实例我们必然可以调用到方法，也可以访问 count 值

    // 9.是不是要用 ref属性，刚才我们 ref加给标签，除此之外我们还可加给组件，Left标签是不是一个组件，那我们希望拿到子组件的实例，是不是可以加一个 ref ,那现在我们点击 父组件的按钮输出 this ,那返回的是 App组件实例还是 Left组件的实例？是不是父组件的实例，那我们可以看一下有没有 $refs ，它指向了谁，它包含了一个标签，是不是还包含了 comLeft 指向一个 vue实例对象，这个实例就是咱们的 Left组件，那我们这个实例是不是就和 Left组件中的 this 一样

    // 10.那大家想一下，我现在拿到了这个实例，那这个实例 comLeft 身上有没有那个方法和属性值？是不是有，是不是有 count属性和 resetCount 方法，那现在基本我们就可以做了是吧

    // 总结：今后在工作中如果需要在父组件中直接去调子组件里面的方法，最简单的方式就是 ref,比子向父传值，父向子传值简单的多
  </script>
</html>
